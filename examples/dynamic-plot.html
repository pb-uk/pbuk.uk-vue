<!DOCTYPE html>
<html>
  <head>
    <title>Dynamic plot example</title>
    <link rel="stylesheet" href="../dist/pbuk-vue.min.css" />
    <script defer src="https://unpkg.com/vue@next"></script>
    <script defer src="../dist/pbuk-vue.min.js"></script>
  </head>
  <body>
    <div id="app">
      <h2>Example 2d plot</h2>
      <visualize-dom @loaded="onLoad2d"></visualize-dom>
      {{ message }}
    </div>
    <script>
      var app = {
        setup() {
          const { Visualize2d } = window.PbukVue;

          let plot2d;

          const onLoad2d = (el) => {
            plot2d = new Visualize2d(el);
            const started = performance.now();
            let x = 0;
            const interval = setInterval(() => {
              plot2d.plot([x, Math.sin(x)]);
              x += Math.PI / 16;
              if (performance.now() - started > 10000) {
                clearInterval(interval);
              }
            }, 1000);
          };

          return {
            message: 'Hello!',
            onLoad2d,
          };
        },
      };
    </script>
  </body>
</html>
